<!--
  VR Slideshow — R1.5
  Date: 2025-11-27
  Notes:
    - Preserves Rev 1.3 UI and file-selection logic exactly to avoid regressions
    - Integrates the R1.4 rendering and texture fixes (curved panels, Ken Burns on UVs, high-quality textures)
    - New components and scripts are loaded via js/app.js?v=6
-->

<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>VR Slideshow — Gallery Mode (R1.5)</title>

    <!-- A-Frame 1.5.0 (CDN) -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@1.0.0/dist/aframe-look-at-component.min.js"></script>

    <link rel="stylesheet" href="css/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body { margin:0; font-family:Arial,Helvetica,sans-serif; background:#080808; color:#eee; padding:16px; }
      #controls { max-width:840px; margin:0 auto; }
      .thumbWrapper img { width:84px; height:84px; object-fit:cover; border-radius:6px; border:2px solid #444; }
      .thumbWrapper { display:inline-block; position:relative; margin:6px; }
      .removeBtn { position:absolute; top:-6px; right:-6px; background:#c33; color:#fff; border:none; width:22px; height:22px; border-radius:50%; cursor:pointer; }
      #status { margin-top:10px; color:#bbb; font-size:13px; }
      #debug { color:#ffd47a; font-size:13px; margin-top:10px; }
      button, select, input { font-size:14px; padding:6px; }
    </style>
  </head>

  <body>
    <div id="controls">
      <h2>VR Slideshow — Gallery Mode (R1.5)</h2>

      <!-- Preserve the single-file workflow used in R1.3 (Quest picks one at a time) -->
      <input id="filePicker" type="file" accept="image/*" />
      <span style="margin-left:12px;">(Tap Choose Files repeatedly to add more images on Quest.)</span>

      <p style="margin-top:8px;">
        Panel size:
        <select id="panelSize">
          <option value="small">Small</option>
          <option value="medium" selected>Medium</option>
          <option value="large">Large</option>
        </select>
        &nbsp;&nbsp;
        Replace interval (sec):
        <input id="replaceInterval" type="number" min="1" max="30" value="5" style="width:70px;" />
      </p>

      <p>Visible panels: <strong>8</strong> (fixed)</p>

      <button id="startBtn" disabled>Start Slideshow</button>
      <div id="status">No images selected yet.</div>
      <div id="imageList" aria-live="polite"></div>
      <div id="debug" aria-live="polite"></div>

      <p style="margin-top:12px;font-size:13px;color:#aaa;">
        When ready: press <strong>Start Slideshow</strong>. The page will prepare textures then prompt to enter VR.
      </p>
    </div>

    <a-scene id="vrScene" embedded vr-mode-ui="enabled:true" style="display:none; height:100vh;">
      <a-assets id="aAssets"></a-assets>

      <a-entity id="cameraRig">
        <a-entity id="camera" camera look-controls position="0 1.6 0"></a-entity>
      </a-entity>

      <a-sphere radius="40" segments-height="48" segments-width="64" scale="-1 1 1" color="#000"></a-sphere>

      <a-entity id="panelContainer"></a-entity>

      <a-entity id="vrDebug" visible="false" position="-1.6 2 -2">
        <a-plane width="3.2" height="1.4" color="#000" opacity="0.8"></a-plane>
        <a-text id="vrDebugText" value="" position="-1.48 0.52 0.01" align="left" wrap-count="30" color="#ffd47a"></a-text>
      </a-entity>
    </a-scene>

    <!-- main app script (version bumped to v=6 for clarity) -->
    <script src="js/app.js?v=6"></script>
  </body>
</html>
